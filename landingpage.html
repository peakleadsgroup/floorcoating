<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floor Coating Qualification | Peak Floor Coating</title>
    <link rel="icon" type="image/x-icon" href="https://github.com/peakleadsgroup/floorcoating/blob/main/images/PeakFavicon.jpg?raw=true">
    
    <!-- Meta Pixel Code -->
    <!-- PLACEHOLDER: Add your Meta Pixel code here -->
    <!-- 
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', 'YOUR_PIXEL_ID');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"
    /></noscript>
    -->
    <!-- End Meta Pixel Code -->
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
                        url('https://github.com/peakleadsgroup/floorcoating/blob/main/images/1-HomePage.png?raw=true') center/cover no-repeat fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .content-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
            max-width: 500px;
        }
        .form-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        .logo-container {
            margin-bottom: 30px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .logo-img {
            max-width: 280px;
            max-height: 80px;
            object-fit: contain;
        }
        .main-heading {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 30px;
            line-height: 1.4;
        }
        .highlight {
            background: #ffeb3b;
            padding: 2px 6px;
            border-radius: 4px;
        }
        .question {
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .sub-heading {
            font-size: 14px;
            color: #666;
            margin-bottom: 25px;
            font-style: italic;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        .option:hover {
            background: #e3f2fd;
            border-color: #2196f3;
        }
        .option.selected {
            background: #e3f2fd;
            border-color: #2196f3;
            color: #1976d2;
        }
        .address-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }
        .address-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .address-input {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            background: #f8f9fa;
            width: 100%;
        }
        .address-input:focus {
            outline: none;
            border-color: #2196f3;
            background: #fff;
        }
        .address-input.error {
            border-color: #f44336;
        }
        .address-field {
            display: flex;
            flex-direction: column;
        }
        .address-label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
            text-align: left;
            font-size: 14px;
        }
        .address-error {
            color: #f44336;
            font-size: 12px;
            margin-top: 5px;
            text-align: left;
            display: none;
        }
        .hidden-initially {
            display: none !important;
        }
        .form-step {
            display: none;
        }
        .form-step.active {
            display: block;
        }
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #4CAF50;
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        .nav-buttons {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }
        .nav-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .nav-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .name-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }
        .phone-step label {
            font-weight: 600;
            margin-bottom: 6px;
            display: block;
            color: #2c3e50;
            text-align: left;
        }
        .phone-help {
            color: #666;
            font-size: 12px;
            margin-top: 5px;
            display: block;
            text-align: left;
        }
        .row {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }
        #phone, #phone2 {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            background: #f8f9fa;
            width: 100%;
        }
        #phone:focus, #phone2:focus {
            outline: none;
            border-color: #2196f3;
            background: #fff;
        }
        /* Phone/Text Button Styles */
        .contact-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            color: white;
            text-decoration: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 20px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 15px;
        }
        
        .call-button {
            background: #10b981;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }
        
        .call-button:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
        }
        
        .text-button {
            background: #3b82f6;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        }
        
        .text-button:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
        }
        
        .contact-button:active {
            transform: translateY(0);
        }
        
        .phone-icon,
        .message-icon {
            width: 24px;
            height: 24px;
        }
        
        .phone-number-display {
            color: #4CAF50;
            font-size: 24px;
            font-weight: 700;
            margin-top: 20px;
            letter-spacing: 1px;
        }
        /* Calendar Styles */
        .calendar-step-header {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .month-nav {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 0 auto;
        }
        .month-display {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            min-width: 180px;
            text-align: center;
        }
        .nav-button {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .nav-button:hover:not(:disabled) {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }
        .nav-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        .weekday-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 8px;
        }
        .weekday-name {
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: #868e96;
            padding: 10px 5px;
            text-transform: uppercase;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }
        .calendar-day {
            aspect-ratio: 1;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: 500;
            color: #333;
            position: relative;
        }
        .month-label {
            position: absolute;
            top: 4px;
            font-size: 10px;
            font-weight: 600;
            color: #4CAF50;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .calendar-day:hover:not(.disabled) {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.2);
            border-color: #4CAF50;
            background: #4CAF50;
            color: white;
        }
        .calendar-day:hover:not(.disabled) .month-label {
            color: white;
        }
        .calendar-day.selected {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
            transform: scale(1.05);
        }
        .calendar-day.selected .month-label {
            color: white;
        }
        .calendar-day.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            background: transparent;
            pointer-events: none;
        }
        .calendar-day.today {
            border-color: #4CAF50;
            font-weight: 700;
        }
        .time-section {
            margin-top: 20px;
        }
        .selected-info {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
        }
        .selected-info h3 {
            font-size: 14px;
            color: #2e7d32;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .selected-info p {
            font-size: 16px;
            color: #1b5e20;
            font-weight: 600;
            margin: 0;
        }
        .time-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .time-slot {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 16px;
        }
        .time-slot:hover {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
            transform: translateY(-2px);
        }
        .no-slots {
            text-align: center;
            padding: 40px 20px;
            color: #868e96;
        }
        .no-slots svg {
            margin-bottom: 10px;
            opacity: 0.5;
        }
        /* Color Gallery Slider Styles */
        .color-gallery-section {
            margin-top: 30px;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
        }
        .color-gallery-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.4;
        }
        .color-slider-container {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            width: 100%;
        }
        .color-slider-track {
            display: flex;
            will-change: transform;
            transition: transform 0.1s ease-out;
        }
        .color-slider-track.scrolling {
            animation: scrollColors 30s linear infinite;
        }
        .color-slider-track.paused {
            animation-play-state: paused;
        }
        .color-slider-track.dragging {
            transition: none;
            animation: none;
        }
        .color-slider-track.fast-forward {
            animation: scrollColors 10s linear infinite;
        }
        .color-slider-track.reverse {
            animation: scrollColorsReverse 30s linear infinite;
        }
        /* Seamless loop - when animation completes, it instantly resets to start */
        .color-slider-track.scrolling,
        .color-slider-track.fast-forward {
            animation-fill-mode: none;
        }
        @keyframes scrollColors {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }
        @keyframes scrollColorsReverse {
            0% {
                transform: translateX(-50%);
            }
            100% {
                transform: translateX(0);
            }
        }
        .color-slide {
            min-width: calc(100% / 2.5);
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .color-slide:hover {
            transform: scale(1.05);
        }
        .color-image {
            width: 100%;
            max-width: 300px;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
        }
        .color-name {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
        }
        .slider-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
        }
        .slider-arrow {
            background: #4CAF50;
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 24px;
            font-weight: bold;
            flex-shrink: 0;
        }
        .slider-arrow:hover {
            background: #45a049;
            transform: scale(1.1);
        }
        .slider-arrow:active {
            transform: scale(0.95);
        }
        /* Reviews Slider Styles */
        .reviews-section {
            margin-top: 30px;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
        }
        .reviews-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.4;
        }
        .reviews-slider-container {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            width: 100%;
            cursor: grab;
            user-select: none;
        }
        .reviews-slider-container.dragging {
            cursor: grabbing;
        }
        .reviews-slider-track {
            display: flex;
            will-change: transform;
            transition: transform 0.1s ease-out;
        }
        .reviews-slider-track.scrolling {
            animation: scrollReviews 40s linear infinite;
        }
        .reviews-slider-track.paused {
            animation-play-state: paused;
        }
        .reviews-slider-track.dragging {
            transition: none;
            animation: none;
        }
        .reviews-slider-track.fast-forward {
            animation: scrollReviews 15s linear infinite;
        }
        .reviews-slider-track.reverse {
            animation: scrollReviewsReverse 40s linear infinite;
        }
        @keyframes scrollReviews {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }
        @keyframes scrollReviewsReverse {
            0% {
                transform: translateX(-50%);
            }
            100% {
                transform: translateX(0);
            }
        }
        .review-slide {
            min-width: calc(100% / 1.5);
            max-width: calc(100% / 1.5);
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            margin-right: 15px;
            box-sizing: border-box;
            width: calc(100% / 1.5);
        }
        .review-text {
            font-size: 15px;
            color: #333;
            line-height: 1.6;
            margin-bottom: 15px;
            font-style: italic;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: normal;
            hyphens: auto;
            max-width: 100%;
            display: block;
            text-align: center;
        }
        .review-stars {
            display: flex;
            gap: 3px;
            margin-bottom: 10px;
            justify-content: center;
        }
        .review-star {
            color: #ffc107;
            font-size: 20px;
        }
        .review-name {
            font-size: 16px;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
        }
        /* Zip Code Checker Styles */
        .zip-checker-section {
            margin-top: 30px;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        .zip-checker-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 30px;
            line-height: 1.4;
            margin-bottom: 20px;
            font-weight: bold;
        }
        .zip-checker-form {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .zip-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            text-align: center;
            letter-spacing: 2px;
        }
        .zip-input:focus {
            outline: none;
            border-color: #4CAF50;
        }
        .zip-check-btn {
            padding: 15px 30px;
            background: #1a365d;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        .zip-check-btn:hover {
            background: #2c5282;
            transform: translateY(-2px);
        }
        .zip-check-btn:active {
            transform: translateY(0);
        }
        .zip-error {
            color: #f44336;
            font-size: 14px;
            margin-top: 10px;
        }
        /* Loading Screen */
        .zip-loading-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            min-height: 200px;
        }
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .loading-text {
            margin-top: 20px;
            font-size: 18px;
            color: #2c3e50;
            font-weight: 600;
        }
        /* Success Screen */
        .zip-success-screen {
            display: block;
            position: relative;
            padding: 20px 0;
        }
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            overflow: hidden;
            z-index: 9999;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffc107;
            animation: confetti-fall linear forwards;
        }
        .confetti:nth-child(2n) { background: #4CAF50; }
        .confetti:nth-child(3n) { background: #2196f3; }
        .confetti:nth-child(4n) { background: #f97316; }
        .confetti:nth-child(5n) { background: #9c27b0; }
        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        .success-content {
            position: relative;
            z-index: 10000;
            background: white;
            padding: 30px 20px;
            border-radius: 20px;
            width: 100%;
            text-align: center;
        }
        .success-icon {
            width: 80px;
            height: 80px;
            background: #1a365d;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 50px;
            color: white;
            font-weight: bold;
            animation: scaleIn 0.5s ease-out;
        }
        @keyframes scaleIn {
            from {
                transform: scale(0);
            }
            to {
                transform: scale(1);
            }
        }
        .success-title {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .success-subtitle {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
        }
        .quote-form {
            text-align: left;
        }
        .form-field {
            margin-bottom: 20px;
        }
        .form-field label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 14px;
        }
        .form-field input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        .form-field input:focus {
            outline: none;
            border-color: #4CAF50;
        }
        .quote-submit-btn {
            width: 100%;
            padding: 18px;
            background: #1a365d;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        .quote-submit-btn:hover {
            background: #2c5282;
            transform: translateY(-2px);
        }
        .quote-submit-btn:active {
            transform: translateY(0);
        }
        /* Gallery Slider Section */
        .gallery-slider-section {
            margin-top: 30px;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
        }
        .gallery-slider-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.4;
        }
        .gallery-slider-container {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            width: 100%;
            cursor: grab;
            user-select: none;
        }
        .gallery-slider-container.dragging {
            cursor: grabbing;
        }
        .gallery-slider-track {
            display: flex;
            will-change: transform;
            transition: transform 0.1s ease-out;
        }
        .gallery-slider-track.scrolling {
            animation: scrollGallery 50s linear infinite;
        }
        .gallery-slider-track.dragging {
            transition: none;
            animation: none;
        }
        @keyframes scrollGallery {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }
        .gallery-slide {
            min-width: 100%;
            flex-shrink: 0;
            border-radius: 12px;
            overflow: hidden;
        }
        .gallery-slide img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
        }
        /* Meet Our Team Section */
        .team-section {
            margin-top: 30px;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        .team-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 30px;
            line-height: 1.4;
        }
        .team-image {
            width: 100%;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .team-image img {
            width: 100%;
            height: auto;
            display: block;
        }
        .team-description {
            margin-top: 20px;
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            text-align: center;
        }
        @media (max-width: 768px) {
            .review-slide {
                min-width: 100%;
            }
            .zip-checker-form {
                flex-direction: column;
            }
            .zip-check-btn {
                width: 100%;
            }
            .success-content {
                padding: 30px 20px;
            }
        }
        @media (max-width: 600px) {
            .form-container {
                padding: 25px;
                margin: 10px;
            }
            .color-gallery-section {
                margin-top: 20px;
                padding: 25px 15px;
            }
            .color-gallery-title {
                font-size: 24px;
            }
            .color-image {
                height: 180px;
            }
            .color-name {
                font-size: 16px;
            }
            .address-row {
                grid-template-columns: 1fr;
            }
            .name-grid {
                grid-template-columns: 1fr;
            }
            .main-heading {
                font-size: 20px;
            }
            .question {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="content-wrapper">
    <div class="form-container">
        <div class="logo-container">
            <img src="https://github.com/peakleadsgroup/floorcoating/blob/main/images/PeakFloorCoating-1000x250-NoBack.png?raw=true" 
                 alt="Peak Floor Coating" 
                 class="logo-img">
        </div>
        <div id="mainHeading">
            <h1 class="main-heading">
                Take our 30 second quiz to get a <span class="highlight">fast and free quote</span>
            </h1>
        </div>
        <div class="progress-bar" id="progressBarContainer">
            <div class="progress-fill" id="progressFill" style="width: 14.3%"></div>
        </div>

        <!-- STEP 1: Homeowner -->
        <div class="form-step active" id="step1">
            <div class="question">Are you a homeowner?</div>
            <div class="options">
                <div class="option" onclick="selectOptionAndAdvance(this, 'homeowner', 'yes')">Yes</div>
                <div class="option" onclick="selectOptionAndAdvance(this, 'homeowner', 'no')">No</div>
            </div>
        </div>

        <!-- STEP 2: Floor Location -->
        <div class="form-step" id="step2">
            <div class="question">What floor are you upgrading?</div>
            <div class="options">
                <div class="option" onclick="selectOptionAndAdvance(this, 'floorLocation', 'garage')">Garage</div>
                <div class="option" onclick="selectOptionAndAdvance(this, 'floorLocation', 'basement')">Basement</div>
                <div class="option" onclick="selectOptionAndAdvance(this, 'floorLocation', 'patio')">Patio</div>
                <div class="option" onclick="selectOptionAndAdvance(this, 'floorLocation', 'other')">Other</div>
            </div>
        </div>

        <!-- STEP 3: Project Timeline -->
        <div class="form-step" id="step3">
            <div class="question">When would you like your floors completed?</div>
            <div class="sub-heading">We only schedule projects that can start soon so you can enjoy your upgraded space</div>
            <div class="options">
                <div class="option" onclick="selectOptionAndAdvance(this, 'projectTimeline', 'asap')">ASAP</div>
                <div class="option" onclick="selectOptionAndAdvance(this, 'projectTimeline', 'within_month')">Within a month</div>
                <div class="option" onclick="selectOptionAndAdvance(this, 'projectTimeline', 'within_3_months')">Within 3 months</div>
                <div class="option" onclick="selectOptionAndAdvance(this, 'projectTimeline', 'not_sure')">Not sure</div>
            </div>
        </div>

        <!-- STEP 4: Main Goal -->
        <div class="form-step" id="step4">
            <div class="question">What do you want most in your new floors?</div>
            <div class="options">
                <div class="option" onclick="selectOptionAndAdvance(this, 'mainGoal', 'upgrade_look')">Upgrade look</div>
                <div class="option" onclick="selectOptionAndAdvance(this, 'mainGoal', 'increase_value')">Increase value</div>
                <div class="option" onclick="selectOptionAndAdvance(this, 'mainGoal', 'make_tougher')">Make tougher</div>
            </div>
        </div>

        <!-- STEP 5: Address -->
        <div class="form-step" id="step5">
            <div class="question">What is the location of this project?</div>
            <div class="sub-heading">Please make sure your address is full and correct so we can confirm you are within our service area</div>
            <div class="address-grid">
                <div class="address-field">
                    <label class="address-label" for="street">Street Address</label>
                    <input type="text" class="address-input" id="street" placeholder="Street Address" oninput="validateAddressForm()">
                    <div class="address-error" id="streetError">Street address must start with a number</div>
                </div>
                
                <div id="cityField" class="address-field hidden-initially">
                    <label class="address-label" for="city">City</label>
                    <input type="text" class="address-input" id="city" placeholder="City" oninput="validateAddressForm()">
                </div>
                
                <div class="address-row hidden-initially" id="stateZipRow">
                    <div class="address-field">
                        <label class="address-label" for="state">State</label>
                        <input type="text" class="address-input" id="state" placeholder="State" oninput="validateAddressForm()">
                    </div>
                    <div class="address-field">
                        <label class="address-label" for="zip">Zip Code</label>
                        <input type="text" class="address-input" id="zip" placeholder="Zip Code" oninput="validateAddressForm()" maxlength="5">
                    </div>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn" onclick="goToStep6()" id="submitFormBtn" disabled>Next</button>
            </div>
        </div>

        <!-- STEP 6: NAME -->
        <div class="form-step" id="step6">
            <div class="question">Who will we be making this quote out to?</div>
            <div class="name-grid">
                <div>
                    <label for="firstName" style="margin-bottom: 10px; display: block; color: #2c3e50; text-align: center;">First Name</label>
                    <input type="text" class="address-input" id="firstName" placeholder="First Name" required autocomplete="given-name" oninput="validateNameForm()">
                </div>
                <div>
                    <label for="lastName" style="margin-bottom: 10px; display: block; color: #2c3e50; text-align: center;">Last Name</label>
                    <input type="text" class="address-input" id="lastName" placeholder="Last Name" required autocomplete="family-name" oninput="validateNameForm()">
                </div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn" onclick="goToStep7()" id="nameNextBtn" disabled>Next</button>
            </div>
        </div>

        <!-- STEP 7: PHONE -->
        <div class="form-step" id="step7">
            <div class="question">Where can we reach you with your quote?</div>
            <div class="row">
                <div id="phoneWrap">
                    <label for="phone">Phone</label>
                    <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="(___) ___-____" required autocomplete="tel" aria-describedby="phoneHelp">
                    <small id="phoneHelp" class="phone-help">US number, 10 digits.</small>
                    <input type="hidden" id="phone_digits" name="phone_digits" value="">
                </div>
                <div id="phoneConfirmWrap" style="display:none">
                    <label for="phone2">Please re-enter your phone</label>
                    <input id="phone2" name="phone_confirm" type="tel" inputmode="tel" placeholder="(___) ___-____" autocomplete="tel" aria-describedby="phone2Help">
                    <small id="phone2Help" class="phone-help">Must match exactly.</small>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn" onclick="submitFinalForm()" id="phoneSubmitBtn" disabled>Get My Quote</button>
            </div>
        </div>

        <!-- PHONE/TEXT CONTACT SCREEN -->
        <div class="form-step" id="contactStep">
            <div style="text-align: center;">
                <div style="font-size: 24px; color: #4CAF50; margin-bottom: 20px; font-weight: bold;">We'll call you soon to schedule your free estimate!</div>
                <div style="font-size: 16px; color: #666; line-height: 1.5; margin-bottom: 30px;">Or if you're ready to schedule now you can contact us by clicking one of the buttons below</div>
                
                <a href="tel:+19193634740" class="contact-button call-button">
                    <svg class="phone-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 00-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
                    </svg>
                    Call
                </a>
                
                <a href="sms:+19193634740?&body=Hey%2C%20this%20is%20Drew%21%20I%20just%20saw%20your%20video%20on%20social%20media%20and%20would%20like%20to%20schedule%20an%20appointment%20to%20get%20my%20free%2C%20no%20obligation%20quote.%20Please%20send%20me%20some%20days%2Ftimes%20that%20you%27re%20available%21" class="contact-button text-button">
                    <svg class="message-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 11H7V9h2v2zm4 0h-2V9h2v2zm4 0h-2V9h2v2z"/>
                    </svg>
                    Text
                </a>
                
                <div class="phone-number-display">(919) 363-4740</div>
            </div>
        </div>

        <!-- CALENDAR BOOKING SCREEN -->
        <div class="form-step" id="calendarStep">
            <div class="calendar-step-header">We'll reach out soon to schedule your free estimate!</div>
            <div style="font-size: 16px; color: #666; margin-bottom: 25px; text-align: center;">Ready to schedule your free estimate now? Choose a time below:</div>
            
            <div class="calendar-header">
                <div class="month-nav">
                    <button class="nav-button" id="prevMonth" onclick="changeCalendarMonth(-1)">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M15 18l-6-6 6-6"/>
                        </svg>
                    </button>
                    <div class="month-display" id="monthDisplay"></div>
                </div>
            </div>
            
            <div class="weekday-header">
                <div class="weekday-name">Sun</div>
                <div class="weekday-name">Mon</div>
                <div class="weekday-name">Tue</div>
                <div class="weekday-name">Wed</div>
                <div class="weekday-name">Thu</div>
                <div class="weekday-name">Fri</div>
                <div class="weekday-name">Sat</div>
            </div>
            
            <div class="calendar-grid" id="calendarGrid"></div>
            
            <div id="timeSection" class="time-section" style="display: none;">
                <div class="selected-info" id="selectedDayInfo"></div>
                <div class="time-grid" id="timeGrid"></div>
            </div>
        </div>

        <!-- CONFIRMATION/THANK YOU SCREEN -->
        <div class="form-step" id="confirmationStep">
            <div style="text-align: center; padding: 40px 20px;">
                <div style="margin-bottom: 30px;">
                    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto; display: block;">
                        <circle cx="12" cy="12" r="10" fill="#e8f5e9"/>
                        <path d="M9 12l2 2 4-4" stroke="#4CAF50" stroke-width="3"/>
                    </svg>
                </div>
                <div style="font-size: 28px; color: #2c3e50; margin-bottom: 20px; font-weight: bold;">Thank you!</div>
                <div style="font-size: 18px; color: #666; line-height: 1.6;">We'll give you a call soon to schedule your free estimate.</div>
        </div>
    </div>
    </div>

    <!-- Gallery Slider Section -->
    <!-- Color Gallery Slider Section -->
    <div class="color-gallery-section">
        <h2 class="color-gallery-title">Explore Our Color Options</h2>
        <div class="color-slider-container" id="colorSliderContainer">
            <div class="color-slider-track scrolling" id="colorSliderTrack">
                <!-- Slides will be generated by JavaScript -->
            </div>
        </div>
        <div class="slider-controls">
            <button class="slider-arrow" id="prevColorBtn" aria-label="Previous color">‹</button>
            <button class="slider-arrow" id="nextColorBtn" aria-label="Next color">›</button>
        </div>
    </div>

    <!-- Reviews Slider Section -->
    <div class="reviews-section">
        <h2 class="reviews-title">What Our Customers Are Saying</h2>
        <div class="reviews-slider-container" id="reviewsSliderContainer">
            <div class="reviews-slider-track scrolling" id="reviewsSliderTrack">
                <!-- Reviews will be generated by JavaScript -->
            </div>
        </div>
        <div class="slider-controls">
            <button class="slider-arrow" id="prevReviewBtn" aria-label="Previous review">‹</button>
            <button class="slider-arrow" id="nextReviewBtn" aria-label="Next review">›</button>
        </div>
    </div>

    <!-- Zip Code Checker Section -->
    <div class="zip-checker-section">
        <h2 class="zip-checker-title">Check if we service your area!</h2>
        
        <!-- Zip Code Input Form -->
        <div class="zip-checker-form" id="zipCheckerForm">
            <input 
                type="text" 
                id="zipCodeInput" 
                class="zip-input" 
                placeholder="Enter your zip code" 
                maxlength="5"
                pattern="[0-9]{5}"
            >
            <button class="zip-check-btn" id="zipCheckBtn" onclick="checkZipCode()">Check</button>
        </div>
        <div class="zip-error" id="zipError" style="display: none;"></div>

        <!-- Loading Screen -->
        <div class="zip-loading-screen" id="zipLoadingScreen" style="display: none;">
            <div class="loading-spinner"></div>
            <div class="loading-text">Checking your area...</div>
        </div>

        <!-- Success Screen with Confetti -->
        <div class="zip-success-screen" id="zipSuccessScreen" style="display: none;">
            <div class="confetti-container" id="confettiContainer"></div>
            <div class="success-content">
            <div class="success-icon">✓</div>
            <h2 class="success-title">We service your area!</h2>
            <p class="success-subtitle">Where can we reach out with your quote?</p>
            
            <form class="quote-form" id="quoteForm" onsubmit="submitQuote(event)">
                <div class="form-field">
                    <label for="quoteFirstName">First Name</label>
                    <input type="text" id="quoteFirstName" name="firstName" required autocomplete="given-name">
                </div>
                <div class="form-field">
                    <label for="quoteLastName">Last Name</label>
                    <input type="text" id="quoteLastName" name="lastName" required autocomplete="family-name">
                </div>
                <div class="form-field">
                    <label for="quotePhone">Phone</label>
                    <input type="tel" id="quotePhone" name="phone" required autocomplete="tel" placeholder="(___) ___-____">
                    <input type="hidden" id="quotePhoneDigits" name="phone_digits">
                </div>
                <div class="form-field">
                    <label for="quoteEmail">Email</label>
                    <input type="email" id="quoteEmail" name="email" required autocomplete="email">
                </div>
                <button type="submit" class="quote-submit-btn">Get Quote</button>
            </form>
        </div>
    </div>
    </div>

    <!-- Gallery Slider Section -->
    <div class="gallery-slider-section">
        <h2 class="gallery-slider-title">See the Peak Difference</h2>
        <div class="gallery-slider-container" id="gallerySliderContainer">
            <div class="gallery-slider-track scrolling" id="gallerySliderTrack">
                <!-- Slides will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Meet Our Team Section -->
    <div class="team-section">
        <h2 class="team-title">Meet Our Team</h2>
        <div class="team-image">
            <img src="https://github.com/peakleadsgroup/floorcoating/blob/main/images/20251211_2231_Peak%20Team%20Portrait_simple_compose_01kc89qqhcf3prpjcgrr0ezggg.png?raw=true" alt="Peak Floor Coating Team">
        </div>
        <div class="team-description">
            <p>We're a small local crew that believes in doing the work right, not just fast. While bigger companies might rush through jobs or cut corners, we take pride in every detail—from surface preparation to the final coat. Our team has years of experience, and we treat every project like it's our own home. When you work with us, you're not just getting a floor coating—you're getting a partner who cares about your complete satisfaction.</p>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURATION - Change this to switch behavior
        // ============================================
        const REDIRECT_MODE = 'external_calendar'; // Options: 'calendar', 'phone', 'none', or 'external_calendar'
        const CLIENT_PHONE = '+19193634740'; // Client phone number for call/text buttons
        
        // ZIP CODE ROUTING CONFIGURATION
        // PLACEHOLDER: Add your zip code routing logic here
        const mondayThursdayZips = new Set([
            // Add zip codes that should use Monday-Thursday calendar
        ]);
        
        const regularCalendarZips = new Set([
            // Add zip codes that should use regular calendar
        ]);
        
        // Calendar Configuration (only used if REDIRECT_MODE = 'calendar')
        const CALENDAR_CONFIG = {
            timezone: 'America/New_York',
            daysOut: 14,
            minHoursInAdvance: 48,
            availableDaysOfWeek: [1, 2, 3, 4, 5], // Monday-Friday
            timeWindows: [
                { start: '08:00', end: '17:00' }
            ]
        };
        
        // Webhook URL for form submissions
        // PLACEHOLDER: Add your webhook URL here
        const WEBHOOK_URL = 'YOUR_WEBHOOK_URL_HERE';
        
        // Calendar Webhook URL for calendar bookings
        const CALENDAR_WEBHOOK_URL = 'YOUR_CALENDAR_WEBHOOK_URL_HERE';
        
        // ============================================
        let currentStep = 1;
        let formData = {};
        let eventId = null;
        let hasTrackedEngagement = false;

        function generateEventId() {
            return 'event_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function selectOptionAndAdvance(element, field, value) {
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            element.classList.add('selected');
            formData[field] = value;
            
            if (!hasTrackedEngagement) {
                if (typeof fbq !== 'undefined') {
                    fbq('track', 'ViewContent', {
                        content_category: 'home_improvement',
                        content_name: 'floor_coating_quiz_start'
                    });
                }
                hasTrackedEngagement = true;
            }
            
            setTimeout(() => {
                nextStep();
            }, 200);
        }

        function validateAddressForm() {
            const street = document.getElementById('street').value.trim();
            const city = document.getElementById('city').value.trim();
            const state = document.getElementById('state').value.trim();
            const zip = document.getElementById('zip').value.trim();
            const cityField = document.getElementById('cityField');
            const stateZipRow = document.getElementById('stateZipRow');
            const streetInput = document.getElementById('street');
            const streetError = document.getElementById('streetError');
            
            // Check if street starts with a number
            const startsWithNumber = /^\d/.test(street);
            
            if (street.length > 0) {
                if (!startsWithNumber) {
                    streetInput.classList.add('error');
                    streetError.style.display = 'block';
                } else {
                    streetInput.classList.remove('error');
                    streetError.style.display = 'none';
                }
                
                cityField.classList.remove('hidden-initially');
                stateZipRow.classList.remove('hidden-initially');
            } else {
                streetInput.classList.remove('error');
                streetError.style.display = 'none';
                cityField.classList.add('hidden-initially');
                stateZipRow.classList.add('hidden-initially');
                document.getElementById('city').value = '';
                document.getElementById('state').value = '';
                document.getElementById('zip').value = '';
            }
            
            const submitBtn = document.getElementById('submitFormBtn');
            if (submitBtn) {
                submitBtn.disabled = !(street && city && state && zip && startsWithNumber);
            }
            
            if (street && city && state && zip && startsWithNumber) {
                formData.address = { street, city, state, zip };
            }
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const percentage = (currentStep / 7) * 100;
            progressFill.style.width = percentage + '%';
        }

        function nextStep() {
            if (currentStep < 7) {
                document.getElementById('step' + currentStep).classList.remove('active');
                currentStep++;
                document.getElementById('step' + currentStep).classList.add('active');
                updateProgress();
            }
        }

        function goToStep6() {
            validateAddressForm();
            if (formData.address) {
                nextStep();
            }
        }

        function validateNameForm() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const nameNextBtn = document.getElementById('nameNextBtn');
            
            if (nameNextBtn) {
                nameNextBtn.disabled = !(firstName && lastName);
            }
            
            if (firstName && lastName) {
                formData.firstName = firstName;
                formData.lastName = lastName;
            }
        }

        function goToStep7() {
            validateNameForm();
            if (formData.firstName && formData.lastName) {
                nextStep();
                setupPhoneValidation();
            }
        }

        function formatPhone(val) {
            const d = val.replace(/\D/g,'').slice(0,10);
            let f = d;
            if(d.length > 6) f = `(${d.slice(0,3)}) ${d.slice(3,6)}-${d.slice(6)}`;
            else if(d.length > 3) f = `(${d.slice(0,3)}) ${d.slice(3)}`;
            else if(d.length > 0) f = `(${d}`;
            return {formatted:f, digits:d};
        }

        function isValidPhoneNumber(digits) {
            // Check 1: Must be exactly 10 digits
            if (digits.length !== 10) {
                return { valid: false, error: 'Phone number must be 10 digits.' };
            }

            // Check 2: Cannot start with 1
            if (digits.charAt(0) === '1') {
                return { valid: false, error: "Phone number shouldn't start with a 1." };
            }

            const areaCode = digits.substring(0, 3);
            const exchange = digits.substring(3, 6);
            const lineNumber = digits.substring(6, 10);

            // Check 3: Area code validation - repeating digits (000, 111, 222, etc)
            if (/^(\d)\1{2}$/.test(areaCode)) {
                return { valid: false, error: 'Invalid area code.' };
            }

            // Check 4: Area code validation - 555
            if (areaCode === '555') {
                return { valid: false, error: 'Area code 555 is not valid.' };
            }

            // Check 5: Area code validation - toll-free numbers
            const tollFreeAreaCodes = ['800', '888', '877', '866', '855', '844', '833'];
            if (tollFreeAreaCodes.includes(areaCode)) {
                return { valid: false, error: 'Toll-free numbers are not accepted.' };
            }

            // Check 6: Exchange code validation - special services
            const specialExchanges = ['911', '411', '611'];
            if (specialExchanges.includes(exchange)) {
                return { valid: false, error: 'Invalid exchange code.' };
            }

            // Check 7: Exchange code validation - cannot start with 0 or 1
            if (exchange.charAt(0) === '0' || exchange.charAt(0) === '1') {
                return { valid: false, error: 'Invalid exchange code.' };
            }

            // Check 8: Sequential digits (ascending)
            if (digits === '1234567890' || digits === '0123456789') {
                return { valid: false, error: 'Sequential numbers are not valid.' };
            }

            for (let i = 0; i < digits.length - 2; i++) {
                const digit1 = parseInt(digits.charAt(i));
                const digit2 = parseInt(digits.charAt(i + 1));
                const digit3 = parseInt(digits.charAt(i + 2));
                
                if (digit2 === digit1 + 1 && digit3 === digit2 + 1) {
                    let sequentialCount = 3;
                    for (let j = i + 3; j < digits.length; j++) {
                        if (parseInt(digits.charAt(j)) === parseInt(digits.charAt(j - 1)) + 1) {
                            sequentialCount++;
                        } else {
                            break;
                        }
                    }
                    if (sequentialCount >= 7) {
                        return { valid: false, error: 'Sequential numbers are not valid.' };
                    }
                }
            }

            // Check 9: All same digits (555-555-5555, etc)
            if (/^(\d)\1{9}$/.test(digits)) {
                return { valid: false, error: 'All digits cannot be the same.' };
            }

            // Check 10: Repeating patterns (123-123-1234, 456-456-4567)
            if (areaCode === exchange && areaCode === lineNumber.substring(0, 3)) {
                return { valid: false, error: 'Repeating patterns are not valid.' };
            }

            // Check 11: Known fake/test numbers (555-0100 through 555-0199)
            if (exchange === '555' && lineNumber.startsWith('01')) {
                return { valid: false, error: 'Test numbers are not valid.' };
            }

            // Check 12: Wildcard/placeholder detection - multiple zeros in a row
            if (digits.includes('000') || digits.includes('0000')) {
                return { valid: false, error: 'Invalid phone number format.' };
            }

            // Check 13: 999-9999 patterns
            if (lineNumber === '9999' || exchange === '999') {
                return { valid: false, error: 'Invalid phone number format.' };
            }

            return { valid: true, error: '' };
        }

        function validatePhones() {
            const phoneInput = document.getElementById('phone');
            const phone2Input = document.getElementById('phone2');
            const phoneConfirmWrap = document.getElementById('phoneConfirmWrap');
            const phoneDigits = document.getElementById('phone_digits');
            const phoneSubmitBtn = document.getElementById('phoneSubmitBtn');
            
            if (!phoneInput) return;
            const p1 = formatPhone(phoneInput.value);
            if (phoneInput.value !== p1.formatted) phoneInput.value = p1.formatted;
            phoneDigits.value = p1.digits;
            let phoneError = document.getElementById('phoneError');
            if (!phoneError) {
                phoneError = document.createElement('div');
                phoneError.id = 'phoneError';
                phoneError.style.color = 'red';
                phoneError.style.fontSize = '12px';
                phoneError.style.marginTop = '5px';
                phoneError.style.display = 'none';
                
                const phoneHelp = document.getElementById('phoneHelp');
                if (phoneHelp) {
                    phoneHelp.parentNode.insertBefore(phoneError, phoneHelp.nextSibling);
                }
            }

            // Validate phone number with all checks
            const validation = isValidPhoneNumber(p1.digits);
            
            if (p1.digits.length > 0 && !validation.valid) {
                phoneError.textContent = validation.error;
                phoneError.style.display = 'block';
                phoneInput.setCustomValidity(validation.error);
            } else {
                phoneError.style.display = 'none';
                if(p1.digits.length === 10 && validation.valid){
                    phoneInput.setCustomValidity('');
                } else if (p1.digits.length > 0 && p1.digits.length < 10) {
                    phoneInput.setCustomValidity('Please enter a valid 10-digit phone number.');
                }
            }

            const shouldShowConfirm = p1.digits.length === 10 && validation.valid;
            phoneConfirmWrap.style.display = shouldShowConfirm ? '' : 'none';
            if (phone2Input) phone2Input.required = shouldShowConfirm;
            const p2 = formatPhone(phone2Input ? phone2Input.value : '');
            if (phone2Input && phone2Input.value !== p2.formatted) phone2Input.value = p2.formatted;
            if(shouldShowConfirm && phone2Input){
                if(p2.digits.length === 0){
                    phone2Input.setCustomValidity('Please re-enter your phone number.');
                } else if(p2.digits !== p1.digits){
                    phone2Input.setCustomValidity('Phone numbers do not match.');
                } else {
                    phone2Input.setCustomValidity('');
                }
            } else if (phone2Input) {
                phone2Input.value = '';
                phone2Input.setCustomValidity('');
            }

            const phoneValid = p1.digits.length === 10 && validation.valid;
            const phone2Valid = !shouldShowConfirm || (p2.digits.length === 10 && p2.digits === p1.digits);
            const buttonShouldEnable = phoneValid && phone2Valid;
            
            if (phoneSubmitBtn) {
                phoneSubmitBtn.disabled = !buttonShouldEnable;
            }
        }

        function setupPhoneValidation() {
            const phoneInput = document.getElementById('phone');
            const phone2Input = document.getElementById('phone2');
            
            if (phoneInput) {
                phoneInput.addEventListener('input', validatePhones);
                phoneInput.addEventListener('blur', validatePhones);
            }
            
            if (phone2Input) {
                phone2Input.addEventListener('input', validatePhones);
                phone2Input.addEventListener('blur', validatePhones);
            }
        }

        // ============================================
        // CALENDAR FUNCTIONS
        // ============================================
        
        let selectedDate = null;
        let selectedTime = null;
        let currentWeekStart = null;
        
        function getCurrentDateInTimezone() {
            return new Date(new Date().toLocaleString('en-US', { timeZone: CALENDAR_CONFIG.timezone }));
        }
        
        function initializeCalendar() {
            const now = getCurrentDateInTimezone();
            now.setHours(0, 0, 0, 0);
            currentWeekStart = new Date(now);
            
            const firstAvailable = renderCalendar();
            
            if (firstAvailable.date && firstAvailable.formatted) {
                selectCalendarDay(firstAvailable.date, firstAvailable.formatted.fullDate);
            }
        }
        
        function isToday(date) {
            const today = getCurrentDateInTimezone();
            return date.getDate() === today.getDate() &&
                   date.getMonth() === today.getMonth() &&
                   date.getFullYear() === today.getFullYear();
        }
        
        function isDayOfWeekAvailable(date) {
            return CALENDAR_CONFIG.availableDaysOfWeek.includes(date.getDay());
        }
        
        function isWithinBookingWindow(date) {
            const now = getCurrentDateInTimezone();
            const hoursFromNow = (date - now) / (1000 * 60 * 60);
            
            if (hoursFromNow < CALENDAR_CONFIG.minHoursInAdvance) return false;
            
            const maxDate = new Date(now);
            maxDate.setDate(now.getDate() + CALENDAR_CONFIG.daysOut);
            
            return date <= maxDate;
        }
        
        function getAvailableTimesForDate(date) {
            if (!date) return [];
            
            const slots = [];
            const now = getCurrentDateInTimezone();
            
            CALENDAR_CONFIG.timeWindows.forEach(window => {
                const [startHour, startMin] = window.start.split(':').map(Number);
                const [endHour, endMin] = window.end.split(':').map(Number);
                
                let currentSlot = new Date(date);
                currentSlot.setHours(startHour, startMin, 0, 0);
                
                const windowEnd = new Date(date);
                windowEnd.setHours(endHour, endMin, 0, 0);
                
                while (currentSlot < windowEnd) {
                    const slotTime = new Date(currentSlot);
                    const hoursFromNow = (slotTime - now) / (1000 * 60 * 60);
                    
                    if (hoursFromNow >= CALENDAR_CONFIG.minHoursInAdvance) {
                        const hours = slotTime.getHours();
                        const minutes = slotTime.getMinutes();
                        const ampm = hours >= 12 ? 'PM' : 'AM';
                        const displayHours = hours % 12 || 12;
                        const displayMinutes = minutes.toString().padStart(2, '0');
                        
                        slots.push({
                            time: slotTime,
                            display: `${displayHours}:${displayMinutes} ${ampm}`,
                            isoString: slotTime.toISOString()
                        });
                    }
                    
                    currentSlot.setMinutes(currentSlot.getMinutes() + 60);
                }
            });
            
            return slots;
        }
        
        function formatDate(date) {
            return {
                fullDate: date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    timeZone: CALENDAR_CONFIG.timezone
                })
            };
        }
        
        function renderCalendar() {
            const calendarGrid = document.getElementById('calendarGrid');
            const monthDisplay = document.getElementById('monthDisplay');
            calendarGrid.innerHTML = '';
            
            const now = getCurrentDateInTimezone();
            now.setHours(0, 0, 0, 0);
            
            const startDate = new Date(currentWeekStart);
            const startDayOfWeek = startDate.getDay();
            startDate.setDate(startDate.getDate() - startDayOfWeek);
            
            const endDate = new Date(startDate);
            endDate.setDate(startDate.getDate() + 20);
            
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                          'July', 'August', 'September', 'October', 'November', 'December'];
            const monthsShort = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 
                               'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            if (startDate.getMonth() === endDate.getMonth()) {
                monthDisplay.textContent = `${months[startDate.getMonth()]} ${startDate.getFullYear()}`;
            } else {
                monthDisplay.textContent = `${months[startDate.getMonth()]} - ${months[endDate.getMonth()]} ${endDate.getFullYear()}`;
            }
            
            let lastMonth = -1;
            let firstAvailableDate = null;
            let firstAvailableFormatted = null;
            
            for (let i = 0; i < 21; i++) {
                const date = new Date(startDate);
                date.setDate(startDate.getDate() + i);
                
                const isAvailable = isDayOfWeekAvailable(date) && 
                                  isWithinBookingWindow(date) &&
                                  getAvailableTimesForDate(date).length > 0;
                
                const dayCell = document.createElement('div');
                dayCell.className = 'calendar-day';
                dayCell.dataset.date = date.toISOString();
                
                if (isToday(date)) {
                    dayCell.classList.add('today');
                }
                
                if (!isAvailable) {
                    dayCell.classList.add('disabled');
                }
                
                if (isAvailable && !firstAvailableDate) {
                    firstAvailableDate = new Date(date);
                    firstAvailableFormatted = formatDate(date);
                }
                
                if (selectedDate && 
                    date.getDate() === selectedDate.getDate() &&
                    date.getMonth() === selectedDate.getMonth() &&
                    date.getFullYear() === selectedDate.getFullYear()) {
                    dayCell.classList.add('selected');
                }
                
                if (date.getMonth() !== lastMonth && date.getDate() === 1) {
                    const monthLabel = document.createElement('div');
                    monthLabel.className = 'month-label';
                    monthLabel.textContent = monthsShort[date.getMonth()];
                    dayCell.appendChild(monthLabel);
                    lastMonth = date.getMonth();
                }
                
                const dayNumber = document.createElement('div');
                dayNumber.textContent = date.getDate();
                dayCell.appendChild(dayNumber);
                
                if (isAvailable) {
                    const formatted = formatDate(date);
                    dayCell.onclick = () => selectCalendarDay(date, formatted.fullDate);
                }
                
                calendarGrid.appendChild(dayCell);
            }
            
            updateNavigationButtons();
            
            return { date: firstAvailableDate, formatted: firstAvailableFormatted };
        }
        
        function changeCalendarMonth(direction) {
            if (direction < 0) {
                currentWeekStart.setDate(currentWeekStart.getDate() + (direction * 7));
                const firstAvailable = renderCalendar();
                
                if (selectedDate) {
                    const now = getCurrentDateInTimezone();
                    now.setHours(0, 0, 0, 0);
                    const startDate = new Date(currentWeekStart);
                    const startDayOfWeek = startDate.getDay();
                    startDate.setDate(startDate.getDate() - startDayOfWeek);
                    const endDate = new Date(startDate);
                    endDate.setDate(startDate.getDate() + 20);
                    
                    if (selectedDate < startDate || selectedDate > endDate) {
                        if (firstAvailable.date && firstAvailable.formatted) {
                            selectCalendarDay(firstAvailable.date, firstAvailable.formatted.fullDate);
                        }
                    } else {
                        const formatted = formatDate(selectedDate);
                        selectCalendarDay(selectedDate, formatted.fullDate);
                    }
                } else if (firstAvailable.date && firstAvailable.formatted) {
                    selectCalendarDay(firstAvailable.date, firstAvailable.formatted.fullDate);
                }
            }
        }
        
        function updateNavigationButtons() {
            const now = getCurrentDateInTimezone();
            now.setHours(0, 0, 0, 0);
            
            const prevButton = document.getElementById('prevMonth');
            
            if (currentWeekStart >= now) {
                prevButton.disabled = true;
            } else {
                prevButton.disabled = false;
            }
        }
        
        function selectCalendarDay(date, fullDate) {
            selectedDate = date;
            selectedTime = null;
            
            document.querySelectorAll('.calendar-day').forEach(day => {
                day.classList.remove('selected');
            });
            
            document.querySelectorAll('.calendar-day').forEach(day => {
                const dayDate = new Date(day.dataset.date);
                if (dayDate.getDate() === date.getDate() &&
                    dayDate.getMonth() === date.getMonth() &&
                    dayDate.getFullYear() === date.getFullYear()) {
                    day.classList.add('selected');
                }
            });
            
            document.getElementById('selectedDayInfo').innerHTML = `
                <h3>Selected Date</h3>
                <p>${fullDate}</p>
            `;
            
            renderTimes();
            document.getElementById('timeSection').style.display = 'block';
        }
        
        function renderTimes() {
            const timeGrid = document.getElementById('timeGrid');
            timeGrid.innerHTML = '';
            
            const slots = getAvailableTimesForDate(selectedDate);
            
            if (slots.length === 0) {
                timeGrid.innerHTML = `
                    <div class="no-slots">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                        <p>No available times for this day</p>
                    </div>
                `;
                return;
            }
            
            slots.forEach(slot => {
                const timeSlot = document.createElement('div');
                timeSlot.className = 'time-slot';
                timeSlot.textContent = slot.display;
                timeSlot.onclick = () => selectCalendarTime(slot);
                timeGrid.appendChild(timeSlot);
            });
        }
        
        function selectCalendarTime(slot) {
            selectedTime = slot;
            
            const formatted = formatDate(selectedDate);
            const appointmentData = {
                ...formData,
                phone: document.getElementById('phone_digits').value,
                appointment_date: selectedDate.toISOString().split('T')[0],
                appointment_time: slot.display,
                appointment_datetime: slot.isoString,
                appointment_full_text: `${formatted.fullDate} at ${slot.display}`
            };
            
            // Send webhook with appointment data
            if (CALENDAR_WEBHOOK_URL !== 'YOUR_CALENDAR_WEBHOOK_URL_HERE') {
                fetch(CALENDAR_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(appointmentData),
                    mode: 'no-cors'
                });
            }
            
            // Show confirmation screen
            document.getElementById('calendarStep').classList.remove('active');
            document.getElementById('confirmationStep').classList.add('active');
        }
        
        function showCalendarScreen() {
            document.getElementById('step7').classList.remove('active');
            document.getElementById('calendarStep').classList.add('active');
            document.getElementById('progressBarContainer').style.display = 'none';
            document.getElementById('mainHeading').style.display = 'none';
            
            initializeCalendar();
        }
        
        // ============================================
        // END CALENDAR FUNCTIONS
        // ============================================
        function redirectToCalendar() {
            const firstName = document.getElementById('firstName')?.value.trim() || '';
            const lastName = document.getElementById('lastName')?.value.trim() || '';
            const fullName = `${firstName} ${lastName}`.replace(/\s+/g, ' ').trim();
            
            const street = formData.address?.street || '';
            const city = formData.address?.city || '';
            const state = formData.address?.state || '';
            const zip = formData.address?.zip || '';
            const fullAddress = `${street}, ${city}, ${state} ${zip}`.trim();
            
            // Build Cal.com URL (no lead email; inbox email fixed)
            const params = new URLSearchParams();
            params.set('email', 'peakleadsgroup@gmail.com');        // fixed inbox
            if (fullName) params.set('name', fullName);
            
            // Phone → smsReminderNumber (+1XXXXXXXXXX) if 10 digits present
            const smsDigits = document.getElementById('phone_digits')?.value
                           || document.getElementById('phone')?.value.replace(/\D/g,'') || '';
            if (smsDigits.length === 10) params.set('smsReminderNumber', `+1${smsDigits}`);
            if (fullAddress) params.set('location', fullAddress);   // optional prefill
            
            // CONDITIONAL REDIRECT LOGIC BASED ON ZIP CODE
            let calendarUrl;
            
            if (zip && mondayThursdayZips.has(zip)) {
                // Use Monday-Thursday only calendar for special zip codes
                calendarUrl = `https://cal.com/peakleadsgroup/fortress-floor-coatings-of-nwfl-mon-thurs-only?${params.toString()}`;
                console.log('Redirecting to Monday-Thursday calendar for zip:', zip);
            } else if (zip && regularCalendarZips.has(zip)) {
                // Use regular calendar for specified zip codes
                calendarUrl = `https://cal.com/peakleadsgroup/fortress-floor-coatings-of-nwfl?${params.toString()}`;
                console.log('Redirecting to regular calendar for zip:', zip);
            } else {
                // Zip not in either list - show confirmation/thank you page instead
                console.log('Zip code not in service area, showing thank you page:', zip);
                showConfirmationScreen();
                return; // Don't redirect to calendar
            }
            
            window.location.href = calendarUrl;
        }

        function showContactScreen() {
            // Get lead's name
            const firstName = document.getElementById('firstName')?.value.trim() || '';
            
            // Format phone number for display
            const phoneForDisplay = formatClientPhoneForDisplay(CLIENT_PHONE);
            
            // Build the SMS body with lead's name
            const smsBody = encodeURIComponent(
                `Hey, this is ${firstName}! I just saw your video on social media and would like to schedule an appointment to get my free, no obligation quote. Please send me some days/times that you're available!`
            );
            
            // Update the contact buttons and phone display
            const callButton = document.querySelector('.call-button');
            const textButton = document.querySelector('.text-button');
            const phoneDisplay = document.querySelector('.phone-number-display');
            
            if (callButton) callButton.href = `tel:${CLIENT_PHONE}`;
            if (textButton) textButton.href = `sms:${CLIENT_PHONE}?&body=${smsBody}`;
            if (phoneDisplay) phoneDisplay.textContent = phoneForDisplay;
            
            // Show the contact screen
            document.getElementById('step7').classList.remove('active');
            document.getElementById('contactStep').classList.add('active');
            document.getElementById('progressBarContainer').style.display = 'none';
            document.getElementById('mainHeading').style.display = 'none';
        }

        function showConfirmationScreen() {
            // Show the confirmation/thank you screen
            document.getElementById('step7').classList.remove('active');
            document.getElementById('confirmationStep').classList.add('active');
            document.getElementById('progressBarContainer').style.display = 'none';
            document.getElementById('mainHeading').style.display = 'none';
        }

        function formatClientPhoneForDisplay(phoneNumber) {
            // Remove all non-digit characters
            const digits = phoneNumber.replace(/\D/g, '');
            
            // Format as (XXX) XXX-XXXX
            if (digits.length === 11 && digits.startsWith('1')) {
                // Remove leading 1 for display
                const without1 = digits.substring(1);
                return `(${without1.slice(0,3)}) ${without1.slice(3,6)}-${without1.slice(6)}`;
            } else if (digits.length === 10) {
                return `(${digits.slice(0,3)}) ${digits.slice(3,6)}-${digits.slice(6)}`;
            }
            
            // Return original if format doesn't match
            return phoneNumber;
        }

        function submitFinalForm() {
            eventId = generateEventId();
            
            const finalData = {
                ...formData,
                phone: document.getElementById('phone_digits').value
            };
            
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Lead', {
                    content_category: 'home_improvement',
                    content_name: 'floor_coating_quote',
                    value: 1.00,
                    currency: 'USD',
                    homeowner_status: finalData.homeowner,
                    floor_location: finalData.floorLocation,
                    project_timeline: finalData.projectTimeline,
                    main_goal: finalData.mainGoal
                }, {
                    eventID: eventId
                });
            }
            
            const fullSummary = `Floor Coating Lead Information:

Name: ${finalData.firstName} ${finalData.lastName}

Phone: ${formatPhoneForDisplay(finalData.phone)}

Homeowner: ${finalData.homeowner === 'yes' ? 'Yes' : 'No'}

Floor Location: ${getFloorLocationDisplay(finalData.floorLocation)}

Project Timeline: ${getProjectTimelineDisplay(finalData.projectTimeline)}

Main Goal: ${getMainGoalDisplay(finalData.mainGoal)}

Address:

${finalData.address.street}

${finalData.address.city}, ${finalData.address.state} ${finalData.address.zip}

Lead generated on: ${new Date().toLocaleDateString('en-US', { 
    weekday: 'long', 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric',
    hour: 'numeric',
    minute: '2-digit',
    hour12: true,
    timeZone: 'America/New_York'
})} EST`.trim();

            const fullSummaryHTML = `Floor Coating Lead Information:<BR><BR>Name: ${finalData.firstName} ${finalData.lastName}<BR>Phone: ${formatPhoneForDisplay(finalData.phone)}<BR><BR>Homeowner: ${finalData.homeowner === 'yes' ? 'Yes' : 'No'}<BR>Floor Location: ${getFloorLocationDisplay(finalData.floorLocation)}<BR>Project Timeline: ${getProjectTimelineDisplay(finalData.projectTimeline)}<BR>Main Goal: ${getMainGoalDisplay(finalData.mainGoal)}<BR><BR>Address:<BR>${finalData.address.street}<BR>${finalData.address.city}, ${finalData.address.state} ${finalData.address.zip}<BR><BR>Lead generated on: ${new Date().toLocaleDateString('en-US', { 
    weekday: 'long', 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric',
    hour: 'numeric',
    minute: '2-digit',
    hour12: true,
    timeZone: 'America/New_York'
})} EST`;

            const webhookData = {
                homeowner: finalData.homeowner,
                floor_location: finalData.floorLocation,
                project_timeline: finalData.projectTimeline,
                main_goal: finalData.mainGoal,
                street_address: finalData.address.street,
                city: finalData.address.city,
                state: finalData.address.state,
                zip: finalData.address.zip,
                phone: finalData.phone,
                first_name: finalData.firstName,
                last_name: finalData.lastName,
                full_name: `${finalData.firstName} ${finalData.lastName}`,
                full_summary: fullSummary,
                full_summary_html: fullSummaryHTML,
                timestamp: new Date().toISOString(),
                form_type: 'floor_coating_qualification',
                clientATID: 'recBGmshJCpkj4Jsl',
                adATID: new URLSearchParams(window.location.search).get('adATID'),
                event_id: eventId
            };
            
            if (WEBHOOK_URL !== 'YOUR_WEBHOOK_URL_HERE') {
                fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(webhookData),
                    mode: 'no-cors'
                }).finally(() => {
                    // Route based on REDIRECT_MODE configuration
                    if (REDIRECT_MODE === 'phone') {
                        showContactScreen();
                    } else if (REDIRECT_MODE === 'calendar') {
                        showCalendarScreen();
                    } else if (REDIRECT_MODE === 'none') {
                        showConfirmationScreen();
                    } else {
                        // Default to external calendar redirect
                        redirectToCalendar();
                    }
                });
            } else {
                // No webhook configured, just show confirmation
                if (REDIRECT_MODE === 'phone') {
                    showContactScreen();
                } else if (REDIRECT_MODE === 'calendar') {
                    showCalendarScreen();
                } else if (REDIRECT_MODE === 'none') {
                    showConfirmationScreen();
                } else {
                    redirectToCalendar();
                }
            }
        }

        function formatPhoneForDisplay(digits) {
            if (digits && digits.length === 10) {
                return `(${digits.slice(0,3)}) ${digits.slice(3,6)}-${digits.slice(6)}`;
            }
            return digits;
        }

        function getFloorLocationDisplay(value) {
            const options = {
                'garage': 'Garage',
                'basement': 'Basement',
                'patio': 'Patio',
                'other': 'Other'
            };
            return options[value] || value;
        }

        function getProjectTimelineDisplay(value) {
            const options = {
                'asap': 'ASAP',
                'within_month': 'Within a month',
                'within_3_months': 'Within 3 months',
                'not_sure': 'Not sure'
            };
            return options[value] || value;
        }

        function getMainGoalDisplay(value) {
            const options = {
                'upgrade_look': 'Upgrade look',
                'increase_value': 'Increase value',
                'make_tougher': 'Make tougher'
            };
            return options[value] || value;
        }

        updateProgress();

        // ============================================
        // COLOR GALLERY SLIDER
        // ============================================
        let touchStartX = 0;
        let touchEndX = 0;
        let isReversing = false;
        let speedTimeout = null;
        
        const colorImages = [
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Basil.jpg.jpg?raw=true', name: 'Basil' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Blue-jay.jpg.jpg?raw=true', name: 'Blue Jay' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Cabin-Fever.jpg.jpg?raw=true', name: 'Cabin Fever' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Cardinal.jpg.jpg?raw=true', name: 'Cardinal' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Cinnamon.jpg.jpg?raw=true', name: 'Cinnamon' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Coffee-Bean.jpg.jpg?raw=true', name: 'Coffee Bean' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Cyberspace.jpg.jpg?raw=true', name: 'Cyberspace' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Domino.jpg.jpg?raw=true', name: 'Domino' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Driftwood.jpg.jpg?raw=true', name: 'Driftwood' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Fortress.jpg.jpg?raw=true', name: 'Fortress' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Fog.jpg.jpg?raw=true', name: 'Fog' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Hog.jpg.jpg?raw=true', name: 'Hog' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Latte.jpg.jpg?raw=true', name: 'Latte' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Madras.jpg.jpg?raw=true', name: 'Madras' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Nutmeg.jpg.jpg?raw=true', name: 'Nutmeg' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Olive-Grove.jpg.jpg?raw=true', name: 'Olive Grove' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Pebble-Beach.jpg.jpg?raw=true', name: 'Pebble Beach' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Pecan.jpg.jpg?raw=true', name: 'Pecan' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/River-Rock.jpg.jpg?raw=true', name: 'River Rock' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Sandstone.jpg.jpg?raw=true', name: 'Sandstone' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Sea-Serpants.jpg.jpg?raw=true', name: 'Sea Serpents' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Slatestone.jpg.jpg?raw=true', name: 'Slatestone' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Smoke.jpg.jpg?raw=true', name: 'Smoke' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Twilight.jpg-1.webp?raw=true', name: 'Twilight' }
        ];

        function initColorSlider() {
            const sliderTrack = document.getElementById('colorSliderTrack');
            sliderContainer = document.getElementById('colorSliderContainer');
            
            if (!sliderTrack || !sliderContainer) {
                console.error('Color slider elements not found');
                return;
            }
            
            // Clear any existing content
            sliderTrack.innerHTML = '';
            
            // Create slides - duplicate the array for seamless infinite scroll
            const allColors = [...colorImages, ...colorImages];
            
            allColors.forEach((color, index) => {
                const slide = document.createElement('div');
                slide.className = 'color-slide';
                slide.dataset.colorIndex = index % colorImages.length;
                slide.innerHTML = `
                    <img src="${color.url}" alt="${color.name}" class="color-image">
                    <div class="color-name">${color.name}</div>
                `;
                sliderTrack.appendChild(slide);
            });
            
            // Ensure scrolling class is applied initially
            sliderTrack.classList.remove('paused', 'fast-forward', 'reverse', 'dragging');
            sliderTrack.classList.add('scrolling');
            
            // Set up arrow buttons for desktop
            const prevBtn = document.getElementById('prevColorBtn');
            const nextBtn = document.getElementById('nextColorBtn');
            
            if (prevBtn) {
                prevBtn.onclick = () => speedUpReverse();
            }
            if (nextBtn) {
                nextBtn.onclick = () => speedUpForward();
            }
            
            // Set up drag handlers after layout
            setTimeout(() => {
                const slideWidth = sliderTrack.offsetWidth / 2.5; // Show 2.5 slides at once
                
                // Store slideWidth for use in drag handlers
                sliderTrack.dataset.slideWidth = slideWidth;
                
                // Mouse events for desktop drag
                sliderContainer.addEventListener('mousedown', (e) => handleDragStart(e, sliderTrack));
                sliderContainer.addEventListener('mousemove', (e) => handleDragMove(e, sliderTrack));
                sliderContainer.addEventListener('mouseup', () => handleDragEnd(sliderTrack));
                sliderContainer.addEventListener('mouseleave', () => handleDragEnd(sliderTrack));
                
                // Touch events for mobile drag
                sliderContainer.addEventListener('touchstart', (e) => handleDragStart(e, sliderTrack), { passive: false });
                sliderContainer.addEventListener('touchmove', (e) => handleDragMove(e, sliderTrack), { passive: false });
                sliderContainer.addEventListener('touchend', () => handleDragEnd(sliderTrack));
            }, 100);
            
            // Prevent image drag
            sliderTrack.querySelectorAll('img').forEach(img => {
                img.addEventListener('dragstart', (e) => e.preventDefault());
            });
        }

        function handleDragStart(e, sliderTrack) {
            isDragging = true;
            isManualScrolling = false;
            
            // Stop any manual scrolling
            if (manualScrollAnimationId) {
                cancelAnimationFrame(manualScrollAnimationId);
                manualScrollAnimationId = null;
            }
            
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            dragStartX = clientX;
            
            // Get current transform from computed style - this reads the ACTUAL rendered position
            const style = window.getComputedStyle(sliderTrack);
            const transform = style.transform;
            let currentX = 0;
            
            if (transform && transform !== 'none') {
                const matrix = new DOMMatrix(transform);
                currentX = matrix.m41;
            } else if (sliderTrack.style.transform) {
                // Parse from inline style
                const match = sliderTrack.style.transform.match(/translateX\(([^)]+)\)/);
                if (match) {
                    currentX = parseFloat(match[1]);
                }
            }
            
            // If we're using CSS animation and haven't initialized manualScrollPosition yet,
            // sync it with the current position
            if (!isManualScrolling && manualScrollPosition === 0 && currentX !== 0) {
                manualScrollPosition = currentX;
            }
            
            // Normalize the position to handle wrapping
            const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || (sliderTrack.offsetWidth / 2.5);
            const totalWidth = slideWidth * colorImages.length;
            
            // Normalize currentX to be within the valid range (-totalWidth to 0)
            while (currentX > 0) {
                currentX -= totalWidth;
            }
            while (currentX <= -totalWidth) {
                currentX += totalWidth;
            }
            
            currentTranslateX = currentX;
            baseTranslateX = currentX;
            
            // Stop CSS animation immediately and set the position explicitly
            sliderTrack.classList.remove('scrolling', 'paused', 'fast-forward', 'reverse');
            sliderTrack.classList.add('dragging');
            sliderTrack.style.transition = 'none'; // Remove transition for instant response
            sliderTrack.style.transform = `translateX(${currentX}px)`; // Set explicit position
            
            if (sliderContainer) {
                sliderContainer.classList.add('dragging');
            }
            
            e.preventDefault();
        }

        function handleDragMove(e, sliderTrack) {
            if (!isDragging) return;
            
            const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || (sliderTrack.offsetWidth / 2.5);
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const diffX = clientX - dragStartX;
            const newTranslateX = baseTranslateX + diffX;
            
            // Calculate total width (one set of images)
            const totalWidth = slideWidth * colorImages.length;
            
            // Handle infinite scroll wrapping - seamless loop
            let finalTranslateX = newTranslateX;
            
            // If we go past the end (50% point), reset to beginning seamlessly
            if (finalTranslateX <= -totalWidth) {
                finalTranslateX = finalTranslateX + totalWidth;
                baseTranslateX = finalTranslateX;
                dragStartX = clientX;
            }
            // If we go before the start, wrap to end
            else if (finalTranslateX > 0) {
                finalTranslateX = finalTranslateX - totalWidth;
                baseTranslateX = finalTranslateX;
                dragStartX = clientX;
            }
            
            // Store current position
            currentTranslateX = finalTranslateX;
            
            // Apply transform immediately for smooth dragging
            sliderTrack.style.transform = `translateX(${finalTranslateX}px)`;
            
            e.preventDefault();
        }

        let manualScrollAnimationId = null;
        let manualScrollPosition = 0;
        let isManualScrolling = false;

        function handleDragEnd(sliderTrack) {
            if (!isDragging) return;
            
            isDragging = false;
            sliderTrack.classList.remove('dragging');
            if (sliderContainer) {
                sliderContainer.classList.remove('dragging');
            }
            
            // Get the final dragged position from the current transform
            const style = window.getComputedStyle(sliderTrack);
            const transform = style.transform;
            let finalX = 0;
            
            if (transform && transform !== 'none') {
                const matrix = new DOMMatrix(transform);
                finalX = matrix.m41;
            } else {
                finalX = currentTranslateX;
            }
            
            const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || (sliderTrack.offsetWidth / 2.5);
            const totalWidth = slideWidth * colorImages.length;
            
            // Normalize to one cycle range (0 to -totalWidth)
            let normalizedX = finalX;
            while (normalizedX <= -totalWidth) {
                normalizedX += totalWidth;
            }
            while (normalizedX > 0) {
                normalizedX -= totalWidth;
            }
            
            // Store current position - keep the exact position
            manualScrollPosition = normalizedX;
            
            // Stop any existing animations
            if (manualScrollAnimationId) {
                cancelAnimationFrame(manualScrollAnimationId);
                manualScrollAnimationId = null;
            }
            
            // Remove all animation classes - use JavaScript scrolling only
            sliderTrack.classList.remove('paused', 'scrolling', 'fast-forward', 'reverse');
            
            // Start smooth JavaScript scrolling from exact current position
            // This prevents any jumps or glitches
            startManualScroll(sliderTrack, slideWidth, totalWidth);
        }

        function startManualScroll(sliderTrack, slideWidth, totalWidth) {
            const scrollSpeed = 0.3;
            let lastTime = performance.now();
            
            function animate(currentTime) {
                // Continue scrolling indefinitely - no transition back to CSS
                // This prevents any jumping or glitching
                if (isDragging) {
                    // If user starts dragging again, stop this animation
                    return;
                }
                
                const deltaTime = currentTime - lastTime;
                lastTime = currentTime;
                
                // Smooth scrolling based on time delta
                const frameSpeed = scrollSpeed * (deltaTime / 16.67);
                manualScrollPosition -= frameSpeed;
                
                // Seamlessly wrap around when we reach the end
                if (manualScrollPosition <= -totalWidth) {
                    manualScrollPosition = 0;
                }
                
                sliderTrack.style.transform = `translateX(${manualScrollPosition}px)`;
                
                manualScrollAnimationId = requestAnimationFrame(animate);
            }
            
            manualScrollAnimationId = requestAnimationFrame(animate);
        }

        function pauseOnColorClick(colorIndex) {
            const sliderTrack = document.getElementById('colorSliderTrack');
            
            // Reset any speed changes
            resetSpeed();
            
            // Pause the animation
            sliderTrack.classList.add('paused');
            
            // Resume scrolling after 3 seconds
            setTimeout(() => {
                sliderTrack.classList.remove('paused');
            }, 3000);
        }

        function speedUpForward() {
            const sliderTrack = document.getElementById('colorSliderTrack');
            if (!sliderTrack) return;
            resetSpeed();
            sliderTrack.classList.remove('reverse', 'paused');
            sliderTrack.classList.add('fast-forward');
            
            // Reset to normal speed after 2 seconds
            if (speedTimeout) clearTimeout(speedTimeout);
            speedTimeout = setTimeout(() => {
                resetSpeed();
            }, 2000);
        }

        function speedUpReverse() {
            const sliderTrack = document.getElementById('colorSliderTrack');
            if (!sliderTrack) return;
            resetSpeed();
            sliderTrack.classList.remove('scrolling', 'paused');
            sliderTrack.classList.add('reverse');
            
            // Reset to normal forward speed after 2 seconds
            if (speedTimeout) clearTimeout(speedTimeout);
            speedTimeout = setTimeout(() => {
                resetSpeed();
            }, 2000);
        }

        function resetSpeed() {
            const sliderTrack = document.getElementById('colorSliderTrack');
            if (sliderTrack) {
                // Stop manual scrolling if active
                if (manualScrollAnimationId) {
                    cancelAnimationFrame(manualScrollAnimationId);
                    manualScrollAnimationId = null;
                }
                isManualScrolling = false;
                
                // Remove all classes and reset
                sliderTrack.classList.remove('fast-forward', 'reverse', 'paused', 'dragging');
                sliderTrack.style.transform = '';
                sliderTrack.style.transition = '';
                
                // Add scrolling class - CSS animation will start from 0
                // Since content is duplicated, starting at 0 looks seamless
                sliderTrack.classList.add('scrolling');
                isReversing = false;
            }
        }


        // ============================================
        // REVIEWS SLIDER
        // ============================================
        const reviews = [
            {
                text: "Fantastic experience from start to finish. The crew showed up on time, explained the process clearly, and delivered exactly what they promised. The floor looks amazing and completely transformed the space. Very professional and easy to work with.",
                name: "Elizabeth Moore"
            },
            {
                text: "Great communication and great results. Pricing was fair, the install was smooth, and the team clearly knew what they were doing. Couldn't be happier with how the garage turned out!!",
                name: "Wanda Beauregard"
            },
            {
                text: "My husband and I had our garage floor coated this past fall and were blown away by the quality of the work. The crew was professional, clean, and finished on schedule. Highly recommend for anyone considering",
                name: "Dennis Ross"
            },
            {
                text: "From the initial estimate to the final walkthrough, everything was handled professionally. The patio looks incredible and the whole process was super easy!",
                name: "Robert Rembert"
            },
            {
                text: "Very impressed with the workmanship and attention to detail",
                name: "Phil Weiland"
            },
            {
                text: "We received multiple quotes and are glad we chose Peak. They weren't the cheapest quote but when they explained why (higher quality materials and training) it was a no brainer.  Couldn't be happier with the quality of service we received and the floors look amazing",
                name: "Miguelina Vinson"
            },
            {
                text: "Professional, knowledgeable, and efficient. The install was smooth and the finished floor looks fantastic. You can tell they care about quality and customer satisfaction.",
                name: "Joann Rueter"
            },
            {
                text: "The team was so easy to work with!  There was a small issue with my garage floor after install where it was a bit uneven.  The team came out within 24 hours to fix it without a second thought and now everything is perfect!  Highly recommend!",
                name: "Maria Brown"
            }
        ];

        let reviewsSliderContainer = null;
        let isDraggingReviews = false;
        let dragStartXReviews = 0;
        let currentTranslateXReviews = 0;
        let baseTranslateXReviews = 0;
        let manualScrollAnimationIdReviews = null;
        let manualScrollPositionReviews = 0;
        let isManualScrollingReviews = false;

        function initReviewsSlider() {
            const reviewsSliderTrack = document.getElementById('reviewsSliderTrack');
            reviewsSliderContainer = document.getElementById('reviewsSliderContainer');
            
            if (!reviewsSliderTrack || !reviewsSliderContainer) {
                console.error('Reviews slider elements not found');
                return;
            }
            
            reviewsSliderTrack.innerHTML = '';
            
            const allReviews = [...reviews, ...reviews];
            
            allReviews.forEach((review) => {
                const slide = document.createElement('div');
                slide.className = 'review-slide';
                slide.innerHTML = `
                    <div class="review-text">${review.text}</div>
                    <div class="review-stars">
                        <span class="review-star">★</span>
                        <span class="review-star">★</span>
                        <span class="review-star">★</span>
                        <span class="review-star">★</span>
                        <span class="review-star">★</span>
                    </div>
                    <div class="review-name">${review.name}</div>
                `;
                reviewsSliderTrack.appendChild(slide);
            });
            
            reviewsSliderTrack.classList.remove('paused', 'fast-forward', 'reverse', 'dragging');
            reviewsSliderTrack.classList.add('scrolling');
            
            const prevBtn = document.getElementById('prevReviewBtn');
            const nextBtn = document.getElementById('nextReviewBtn');
            
            if (prevBtn) {
                prevBtn.onclick = () => speedUpReverseReviews();
            }
            if (nextBtn) {
                nextBtn.onclick = () => speedUpForwardReviews();
            }
            
            setTimeout(() => {
                const slideWidth = reviewsSliderTrack.offsetWidth / 1.5;
                reviewsSliderTrack.dataset.slideWidth = slideWidth;
                
                reviewsSliderContainer.addEventListener('mousedown', (e) => handleDragStartReviews(e, reviewsSliderTrack));
                reviewsSliderContainer.addEventListener('mousemove', (e) => handleDragMoveReviews(e, reviewsSliderTrack));
                reviewsSliderContainer.addEventListener('mouseup', () => handleDragEndReviews(reviewsSliderTrack));
                reviewsSliderContainer.addEventListener('mouseleave', () => handleDragEndReviews(reviewsSliderTrack));
                
                reviewsSliderContainer.addEventListener('touchstart', (e) => handleDragStartReviews(e, reviewsSliderTrack), { passive: false });
                reviewsSliderContainer.addEventListener('touchmove', (e) => handleDragMoveReviews(e, reviewsSliderTrack), { passive: false });
                reviewsSliderContainer.addEventListener('touchend', () => handleDragEndReviews(reviewsSliderTrack));
                
                // Start continuous scrolling
                startContinuousReviewsScroll(reviewsSliderTrack);
            }, 100);
        }
        
        function startContinuousReviewsScroll(sliderTrack) {
            let lastTime = performance.now();
            function animate(currentTime) {
                const deltaTime = currentTime - lastTime;
                lastTime = currentTime;
                manualScrollPositionReviews -= 0.3 * (deltaTime / 16.67);
                const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || (sliderTrack.offsetWidth / 1.5);
                const totalWidth = slideWidth * reviews.length;
                if (manualScrollPositionReviews <= -totalWidth) {
                    manualScrollPositionReviews += totalWidth;
                }
                sliderTrack.style.transform = `translateX(${manualScrollPositionReviews}px)`;
                if (!isDraggingReviews) {
                    manualScrollAnimationIdReviews = requestAnimationFrame(animate);
                }
            }
            manualScrollAnimationIdReviews = requestAnimationFrame(animate);
        }

        function handleDragStartReviews(e, sliderTrack) {
            isDraggingReviews = true;
            isManualScrollingReviews = false;
            
            if (manualScrollAnimationIdReviews) {
                cancelAnimationFrame(manualScrollAnimationIdReviews);
                manualScrollAnimationIdReviews = null;
            }
            
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            dragStartXReviews = clientX;
            
            const style = window.getComputedStyle(sliderTrack);
            const transform = style.transform;
            let currentX = 0;
            
            if (transform && transform !== 'none') {
                const matrix = new DOMMatrix(transform);
                currentX = matrix.m41;
            } else if (sliderTrack.style.transform) {
                const match = sliderTrack.style.transform.match(/translateX\(([^)]+)\)/);
                if (match) {
                    currentX = parseFloat(match[1]);
                }
            }
            
            // If we're using CSS animation and haven't initialized manualScrollPositionReviews yet,
            // sync it with the current position
            if (!isManualScrollingReviews && manualScrollPositionReviews === 0 && currentX !== 0) {
                manualScrollPositionReviews = currentX;
            }
            
            // Normalize the position to handle wrapping
            const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || (sliderTrack.offsetWidth / 1.5);
            const totalWidth = slideWidth * reviews.length;
            
            // Normalize currentX to be within the valid range (-totalWidth to 0)
            while (currentX > 0) {
                currentX -= totalWidth;
            }
            while (currentX <= -totalWidth) {
                currentX += totalWidth;
            }
            
            currentTranslateXReviews = currentX;
            baseTranslateXReviews = currentX;
            
            // Stop CSS animation immediately and set the position explicitly
            sliderTrack.classList.remove('scrolling', 'paused', 'fast-forward', 'reverse');
            sliderTrack.classList.add('dragging');
            sliderTrack.style.transition = 'none'; // Remove transition for instant response
            sliderTrack.style.transform = `translateX(${currentX}px)`; // Set explicit position
            
            if (reviewsSliderContainer) {
                reviewsSliderContainer.classList.add('dragging');
            }
            
            e.preventDefault();
        }

        function handleDragMoveReviews(e, sliderTrack) {
            if (!isDraggingReviews) return;
            
            const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || (sliderTrack.offsetWidth / 1.5);
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const diffX = clientX - dragStartXReviews;
            const newTranslateX = baseTranslateXReviews + diffX;
            
            const totalWidth = slideWidth * reviews.length;
            
            let finalTranslateX = newTranslateX;
            if (finalTranslateX <= -totalWidth) {
                finalTranslateX = finalTranslateX + totalWidth;
                baseTranslateXReviews = finalTranslateX;
                dragStartXReviews = clientX;
            } else if (finalTranslateX > 0) {
                finalTranslateX = finalTranslateX - totalWidth;
                baseTranslateXReviews = finalTranslateX;
                dragStartXReviews = clientX;
            }
            
            currentTranslateXReviews = finalTranslateX;
            sliderTrack.style.transform = `translateX(${finalTranslateX}px)`;
            
            e.preventDefault();
        }

        function handleDragEndReviews(sliderTrack) {
            if (!isDraggingReviews) return;
            
            isDraggingReviews = false;
            sliderTrack.classList.remove('dragging');
            if (reviewsSliderContainer) {
                reviewsSliderContainer.classList.remove('dragging');
            }
            
            // Get final position from computed style
            const style = window.getComputedStyle(sliderTrack);
            const transform = style.transform;
            let finalX = 0;
            
            if (transform && transform !== 'none') {
                const matrix = new DOMMatrix(transform);
                finalX = matrix.m41;
            } else {
                finalX = currentTranslateXReviews;
            }
            
            const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || (sliderTrack.offsetWidth / 1.5);
            const totalWidth = slideWidth * reviews.length;
            
            let normalizedX = finalX;
            while (normalizedX <= -totalWidth) normalizedX += totalWidth;
            while (normalizedX > 0) normalizedX -= totalWidth;
            
            manualScrollPositionReviews = normalizedX;
            
            if (manualScrollAnimationIdReviews) {
                cancelAnimationFrame(manualScrollAnimationIdReviews);
                manualScrollAnimationIdReviews = null;
            }
            
            sliderTrack.classList.remove('paused', 'scrolling', 'fast-forward', 'reverse');
            startManualScrollReviews(sliderTrack, slideWidth, totalWidth);
        }

        function startManualScrollReviews(sliderTrack, slideWidth, totalWidth) {
            const scrollSpeed = 0.3;
            let lastTime = performance.now();
            
            function animate(currentTime) {
                // Continue scrolling indefinitely - no transition back to CSS
                if (isDraggingReviews) {
                    return;
                }
                
                const deltaTime = currentTime - lastTime;
                lastTime = currentTime;
                
                const frameSpeed = scrollSpeed * (deltaTime / 16.67);
                manualScrollPositionReviews -= frameSpeed;
                
                if (manualScrollPositionReviews <= -totalWidth) {
                    manualScrollPositionReviews = 0;
                }
                
                sliderTrack.style.transform = `translateX(${manualScrollPositionReviews}px)`;
                manualScrollAnimationIdReviews = requestAnimationFrame(animate);
            }
            
            manualScrollAnimationIdReviews = requestAnimationFrame(animate);
        }

        function speedUpForwardReviews() {
            const sliderTrack = document.getElementById('reviewsSliderTrack');
            if (!sliderTrack) return;
            resetSpeedReviews();
            sliderTrack.classList.remove('reverse', 'paused');
            sliderTrack.classList.add('fast-forward');
            
            if (speedTimeout) clearTimeout(speedTimeout);
            speedTimeout = setTimeout(() => {
                resetSpeedReviews();
            }, 2000);
        }

        function speedUpReverseReviews() {
            const sliderTrack = document.getElementById('reviewsSliderTrack');
            if (!sliderTrack) return;
            resetSpeedReviews();
            sliderTrack.classList.remove('scrolling', 'paused');
            sliderTrack.classList.add('reverse');
            
            if (speedTimeout) clearTimeout(speedTimeout);
            speedTimeout = setTimeout(() => {
                resetSpeedReviews();
            }, 2000);
        }

        function resetSpeedReviews() {
            const sliderTrack = document.getElementById('reviewsSliderTrack');
            if (sliderTrack) {
                if (manualScrollAnimationIdReviews) {
                    cancelAnimationFrame(manualScrollAnimationIdReviews);
                    manualScrollAnimationIdReviews = null;
                }
                isManualScrollingReviews = false;
                
                sliderTrack.classList.remove('fast-forward', 'reverse', 'paused', 'dragging');
                sliderTrack.classList.add('scrolling');
                sliderTrack.style.transform = '';
                sliderTrack.style.transition = '';
            }
        }

        // Initialize sliders when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                initColorSlider();
                initReviewsSlider();
                initGallerySlider();
            });
        } else {
            initColorSlider();
            initReviewsSlider();
            initGallerySlider();
        }
        
        // Backup initialization on window load
        window.addEventListener('load', function() {
            const sliderTrack = document.getElementById('colorSliderTrack');
            if (sliderTrack && sliderTrack.children.length === 0) {
                initColorSlider();
            }
            const reviewsTrack = document.getElementById('reviewsSliderTrack');
            if (reviewsTrack && reviewsTrack.children.length === 0) {
                initReviewsSlider();
            }
            const galleryTrack = document.getElementById('gallerySliderTrack');
            if (galleryTrack && galleryTrack.children.length === 0) {
                initGallerySlider();
            }
        });

        // ============================================
        // GALLERY SLIDER
        // ============================================
        const galleryImages = [
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/BeforeAfter.png?raw=true', alt: 'Before/After residential garage' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Sleek%20Showroom.png?raw=true', alt: 'Finished commercial showroom floor' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Custom%20Orange%20Flake.png?raw=true', alt: 'Residential garage with custom orange flake' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/Basement%20BeforeAfter.png?raw=true', alt: 'Before/After basement' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/OutdoorPatio.png?raw=true', alt: 'Outdoor patio coating' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/20251211_2228_Garage%20Floor%20Transformation_simple_compose_01kc89jb1xe69s58g68836t82q.png?raw=true', alt: 'Before/After 3-car garage' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/20251211_2236_Pristine%20Basement%20with%20Polyurea%20Flooring_simple_compose_01kc89zy88fqjr85w8bfn4xkn0.png?raw=true', alt: 'Commercial fitness center floor' },
            { url: 'https://github.com/peakleadsgroup/floorcoating/blob/main/images/20251211_2235_Sparkling%20Garage%20Floor_simple_compose_01kc89z8pwe7evh7nnbefnpbq8.png?raw=true', alt: 'Modern metallic residential garage' }
        ];

        let galleryAnimationId = null;
        let galleryManualScrollPosition = 0;
        let galleryScrollSpeed = 0.3;
        let isDraggingGallery = false;
        let galleryDragStartX = 0;
        let galleryCurrentTranslateX = 0;
        let galleryBaseTranslateX = 0;
        let gallerySliderContainer = null;

        function initGallerySlider() {
            const sliderTrack = document.getElementById('gallerySliderTrack');
            gallerySliderContainer = document.getElementById('gallerySliderContainer');
            
            if (!sliderTrack || !gallerySliderContainer) {
                console.error('Gallery slider elements not found');
                return;
            }
            
            sliderTrack.innerHTML = '';
            const allImages = [...galleryImages, ...galleryImages];
            
            allImages.forEach((img, index) => {
                const slide = document.createElement('div');
                slide.className = 'gallery-slide';
                slide.innerHTML = `<img src="${img.url}" alt="${img.alt}">`;
                sliderTrack.appendChild(slide);
            });
            
            sliderTrack.classList.add('scrolling');
            
            setTimeout(() => {
                const slideWidth = sliderTrack.offsetWidth;
                sliderTrack.dataset.slideWidth = slideWidth;
                
                gallerySliderContainer.addEventListener('mousedown', (e) => handleGalleryDragStart(e, sliderTrack));
                gallerySliderContainer.addEventListener('mousemove', (e) => handleGalleryDragMove(e, sliderTrack));
                gallerySliderContainer.addEventListener('mouseup', () => handleGalleryDragEnd(sliderTrack));
                gallerySliderContainer.addEventListener('mouseleave', () => handleGalleryDragEnd(sliderTrack));
                
                gallerySliderContainer.addEventListener('touchstart', (e) => handleGalleryDragStart(e, sliderTrack), { passive: false });
                gallerySliderContainer.addEventListener('touchmove', (e) => handleGalleryDragMove(e, sliderTrack), { passive: false });
                gallerySliderContainer.addEventListener('touchend', () => handleGalleryDragEnd(sliderTrack));
            }, 100);
            
            startGalleryScroll(sliderTrack);
        }

        function startGalleryScroll(sliderTrack) {
            let lastTime = performance.now();
            function animate(currentTime) {
                const deltaTime = currentTime - lastTime;
                lastTime = currentTime;
                galleryManualScrollPosition -= galleryScrollSpeed * (deltaTime / 16.67);
                const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || sliderTrack.offsetWidth;
                const totalWidth = slideWidth * galleryImages.length;
                if (galleryManualScrollPosition <= -totalWidth) {
                    galleryManualScrollPosition += totalWidth;
                }
                sliderTrack.style.transform = `translateX(${galleryManualScrollPosition}px)`;
                galleryAnimationId = requestAnimationFrame(animate);
            }
            galleryAnimationId = requestAnimationFrame(animate);
        }

        function handleGalleryDragStart(e, sliderTrack) {
            if (galleryAnimationId) {
                cancelAnimationFrame(galleryAnimationId);
                galleryAnimationId = null;
            }
            isDraggingGallery = true;
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            galleryDragStartX = clientX;
            const style = window.getComputedStyle(sliderTrack);
            const transform = style.transform;
            let currentX = 0;
            if (transform && transform !== 'none') {
                const matrix = new DOMMatrix(transform);
                currentX = matrix.m41;
            }
            const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || sliderTrack.offsetWidth;
            const totalWidth = slideWidth * galleryImages.length;
            while (currentX > 0) currentX -= totalWidth;
            while (currentX <= -totalWidth) currentX += totalWidth;
            galleryCurrentTranslateX = currentX;
            galleryBaseTranslateX = currentX;
            sliderTrack.classList.remove('scrolling');
            sliderTrack.classList.add('dragging');
            sliderTrack.style.transition = 'none';
            sliderTrack.style.transform = `translateX(${currentX}px)`;
            if (gallerySliderContainer) gallerySliderContainer.classList.add('dragging');
            e.preventDefault();
        }

        function handleGalleryDragMove(e, sliderTrack) {
            if (!isDraggingGallery) return;
            const slideWidth = parseFloat(sliderTrack.dataset.slideWidth) || sliderTrack.offsetWidth;
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const diffX = clientX - galleryDragStartX;
            const newTranslateX = galleryBaseTranslateX + diffX;
            const totalWidth = slideWidth * galleryImages.length;
            let finalTranslateX = newTranslateX;
            if (finalTranslateX <= -totalWidth) {
                finalTranslateX = finalTranslateX + totalWidth;
                galleryBaseTranslateX = finalTranslateX;
                galleryDragStartX = clientX;
            } else if (finalTranslateX > 0) {
                finalTranslateX = finalTranslateX - totalWidth;
                galleryBaseTranslateX = finalTranslateX;
                galleryDragStartX = clientX;
            }
            galleryCurrentTranslateX = finalTranslateX;
            sliderTrack.style.transform = `translateX(${finalTranslateX}px)`;
            e.preventDefault();
        }

        function handleGalleryDragEnd(sliderTrack) {
            if (!isDraggingGallery) return;
            isDraggingGallery = false;
            sliderTrack.classList.remove('dragging');
            if (gallerySliderContainer) gallerySliderContainer.classList.remove('dragging');
            galleryManualScrollPosition = galleryCurrentTranslateX;
            startGalleryScroll(sliderTrack);
        }

        // ============================================
        // DUPLICATE QUIZ FUNCTIONS
        // ============================================
        let currentStep2 = 1;
        let formData2 = {};

        function selectOptionAndAdvance2(element, field, value) {
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            formData2[field] = value;
            setTimeout(() => {
                nextStep2();
            }, 200);
        }

        function nextStep2() {
            if (currentStep2 < 7) {
                document.getElementById('step' + currentStep2 + '-2').classList.remove('active');
                currentStep2++;
                document.getElementById('step' + currentStep2 + '-2').classList.add('active');
                updateProgress2();
            }
        }

        function updateProgress2() {
            const progressFill = document.getElementById('progressFill2');
            const percentage = (currentStep2 / 7) * 100;
            progressFill.style.width = percentage + '%';
        }

        function validateAddressForm2() {
            const street = document.getElementById('street2').value.trim();
            const city = document.getElementById('city2').value.trim();
            const state = document.getElementById('state2').value.trim();
            const zip = document.getElementById('zip2').value.trim();
            const cityField = document.getElementById('cityField2');
            const stateZipRow = document.getElementById('stateZipRow2');
            const streetInput = document.getElementById('street2');
            const streetError = document.getElementById('streetError2');
            const startsWithNumber = /^\d/.test(street);
            if (street.length > 0) {
                if (!startsWithNumber) {
                    streetInput.classList.add('error');
                    streetError.style.display = 'block';
                } else {
                    streetInput.classList.remove('error');
                    streetError.style.display = 'none';
                }
                cityField.classList.remove('hidden-initially');
                stateZipRow.classList.remove('hidden-initially');
            } else {
                streetInput.classList.remove('error');
                streetError.style.display = 'none';
                cityField.classList.add('hidden-initially');
                stateZipRow.classList.add('hidden-initially');
                document.getElementById('city2').value = '';
                document.getElementById('state2').value = '';
                document.getElementById('zip2').value = '';
            }
            const submitBtn = document.getElementById('submitFormBtn2');
            if (submitBtn) {
                submitBtn.disabled = !(street && city && state && zip && startsWithNumber);
            }
            if (street && city && state && zip && startsWithNumber) {
                formData2.address = { street, city, state, zip };
            }
        }

        function goToStep6_2() {
            validateAddressForm2();
            if (formData2.address) {
                nextStep2();
            }
        }

        function validateNameForm2() {
            const firstName = document.getElementById('firstName2').value.trim();
            const lastName = document.getElementById('lastName2').value.trim();
            const nameNextBtn = document.getElementById('nameNextBtn2');
            if (nameNextBtn) {
                nameNextBtn.disabled = !(firstName && lastName);
            }
            if (firstName && lastName) {
                formData2.firstName = firstName;
                formData2.lastName = lastName;
            }
        }

        function goToStep7_2() {
            validateNameForm2();
            if (formData2.firstName && formData2.lastName) {
                nextStep2();
                setupPhoneValidation2();
            }
        }

        function setupPhoneValidation2() {
            const phoneInput = document.getElementById('phone2-input');
            const phone2Input = document.getElementById('phone2-confirm');
            if (phoneInput) {
                phoneInput.addEventListener('input', validatePhones2);
                phoneInput.addEventListener('blur', validatePhones2);
            }
            if (phone2Input) {
                phone2Input.addEventListener('input', validatePhones2);
                phone2Input.addEventListener('blur', validatePhones2);
            }
        }

        function validatePhones2() {
            const phoneInput = document.getElementById('phone2-input');
            const phone2Input = document.getElementById('phone2-confirm');
            const phoneConfirmWrap = document.getElementById('phoneConfirmWrap2');
            const phoneDigits = document.getElementById('phone_digits2');
            const phoneSubmitBtn = document.getElementById('phoneSubmitBtn2');
            if (!phoneInput) return;
            const p1 = formatPhone(phoneInput.value);
            if (phoneInput.value !== p1.formatted) phoneInput.value = p1.formatted;
            phoneDigits.value = p1.digits;
            let phoneError = document.getElementById('phoneError2');
            if (!phoneError) {
                phoneError = document.createElement('div');
                phoneError.id = 'phoneError2';
                phoneError.style.color = 'red';
                phoneError.style.fontSize = '12px';
                phoneError.style.marginTop = '5px';
                phoneError.style.display = 'none';
                const phoneHelp = document.getElementById('phoneHelp2');
                if (phoneHelp) {
                    phoneHelp.parentNode.insertBefore(phoneError, phoneHelp.nextSibling);
                }
            }
            const validation = isValidPhoneNumber(p1.digits);
            if (p1.digits.length > 0 && !validation.valid) {
                phoneError.textContent = validation.error;
                phoneError.style.display = 'block';
                phoneInput.setCustomValidity(validation.error);
            } else {
                phoneError.style.display = 'none';
                if(p1.digits.length === 10 && validation.valid){
                    phoneInput.setCustomValidity('');
                } else if (p1.digits.length > 0 && p1.digits.length < 10) {
                    phoneInput.setCustomValidity('Please enter a valid 10-digit phone number.');
                }
            }
            const shouldShowConfirm = p1.digits.length === 10 && validation.valid;
            phoneConfirmWrap.style.display = shouldShowConfirm ? '' : 'none';
            if (phone2Input) phone2Input.required = shouldShowConfirm;
            const p2 = formatPhone(phone2Input ? phone2Input.value : '');
            if (phone2Input && phone2Input.value !== p2.formatted) phone2Input.value = p2.formatted;
            if(shouldShowConfirm && phone2Input){
                if(p2.digits.length === 0){
                    phone2Input.setCustomValidity('Please re-enter your phone number.');
                } else if(p2.digits !== p1.digits){
                    phone2Input.setCustomValidity('Phone numbers do not match.');
                } else {
                    phone2Input.setCustomValidity('');
                }
            } else if (phone2Input) {
                phone2Input.value = '';
                phone2Input.setCustomValidity('');
            }
            const phoneValid = p1.digits.length === 10 && validation.valid;
            const phone2Valid = !shouldShowConfirm || (p2.digits.length === 10 && p2.digits === p1.digits);
            const buttonShouldEnable = phoneValid && phone2Valid;
            if (phoneSubmitBtn) {
                phoneSubmitBtn.disabled = !buttonShouldEnable;
            }
        }

        function submitFinalForm2() {
            const finalData = {
                ...formData2,
                phone: document.getElementById('phone_digits2').value
            };
            const fullSummary = `Floor Coating Lead Information: Name: ${finalData.firstName} ${finalData.lastName} Phone: ${formatPhoneForDisplay(finalData.phone)} Homeowner: ${finalData.homeowner === 'yes' ? 'Yes' : 'No'} Floor Location: ${getFloorLocationDisplay(finalData.floorLocation)} Project Timeline: ${getProjectTimelineDisplay(finalData.projectTimeline)} Main Goal: ${getMainGoalDisplay(finalData.mainGoal)} Address: ${finalData.address.street} ${finalData.address.city}, ${finalData.address.state} ${finalData.address.zip}`;
            const webhookData = {
                homeowner: finalData.homeowner,
                floor_location: finalData.floorLocation,
                project_timeline: finalData.projectTimeline,
                main_goal: finalData.mainGoal,
                street_address: finalData.address.street,
                city: finalData.address.city,
                state: finalData.address.state,
                zip: finalData.address.zip,
                phone: finalData.phone,
                first_name: finalData.firstName,
                last_name: finalData.lastName,
                full_name: `${finalData.firstName} ${finalData.lastName}`,
                full_summary: fullSummary,
                timestamp: new Date().toISOString(),
                form_type: 'floor_coating_qualification_duplicate'
            };
            if (WEBHOOK_URL !== 'YOUR_WEBHOOK_URL_HERE') {
                fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(webhookData),
                    mode: 'no-cors'
                }).finally(() => {
                    redirectToCalendar();
                });
            } else {
                redirectToCalendar();
            }
        }

        // ============================================
        // ZIP CODE CHECKER
        // ============================================
        function checkZipCode() {
            const zipInput = document.getElementById('zipCodeInput');
            const zipError = document.getElementById('zipError');
            const zip = zipInput.value.trim();
            
            // Reset error
            zipError.style.display = 'none';
            zipError.textContent = '';
            
            // Validate zip code
            if (!zip) {
                zipError.textContent = 'Please enter a zip code';
                zipError.style.display = 'block';
                zipInput.focus();
                return;
            }
            
            if (!/^\d{5}$/.test(zip)) {
                zipError.textContent = 'Please enter a valid 5-digit zip code';
                zipError.style.display = 'block';
                zipInput.focus();
                return;
            }
            
            // Show loading screen
            const loadingScreen = document.getElementById('zipLoadingScreen');
            loadingScreen.style.display = 'flex';
            
            // Hide zip checker form
            document.getElementById('zipCheckerForm').style.display = 'none';
            
            // Show success screen after 3-4 seconds
            setTimeout(() => {
                loadingScreen.style.display = 'none';
                showSuccessScreen();
            }, 3500);
        }

        function showSuccessScreen() {
            const successScreen = document.getElementById('zipSuccessScreen');
            successScreen.style.display = 'flex';
            
            // Create confetti
            createConfetti();
            
            // Set up phone formatting
            setupQuotePhoneValidation();
        }

        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            container.innerHTML = '';
            
            const colors = ['#ffc107', '#4CAF50', '#2196f3', '#f97316', '#9c27b0'];
            const confettiCount = 50;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = (Math.random() * 10 + 5) + 'px';
                confetti.style.height = (Math.random() * 10 + 5) + 'px';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                
                container.appendChild(confetti);
            }
        }

        function setupQuotePhoneValidation() {
            const phoneInput = document.getElementById('quotePhone');
            if (phoneInput) {
                phoneInput.addEventListener('input', function() {
                    formatQuotePhone(this);
                });
            }
        }

        function formatQuotePhone(input) {
            const digits = input.value.replace(/\D/g, '').slice(0, 10);
            let formatted = digits;
            
            if (digits.length > 6) {
                formatted = `(${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6)}`;
            } else if (digits.length > 3) {
                formatted = `(${digits.slice(0, 3)}) ${digits.slice(3)}`;
            } else if (digits.length > 0) {
                formatted = `(${digits}`;
            }
            
            input.value = formatted;
            document.getElementById('quotePhoneDigits').value = digits;
        }

        function submitQuote(event) {
            event.preventDefault();
            
            const firstName = document.getElementById('quoteFirstName').value.trim();
            const lastName = document.getElementById('quoteLastName').value.trim();
            const name = `${firstName} ${lastName}`.trim();
            const phone = document.getElementById('quotePhoneDigits').value;
            const email = document.getElementById('quoteEmail').value.trim();
            const zip = document.getElementById('zipCodeInput').value.trim();
            
            // Validate
            if (!name || !phone || !email) {
                alert('Please fill in all fields');
                return;
            }
            
            if (phone.length !== 10) {
                alert('Please enter a valid 10-digit phone number');
                return;
            }
            
            // Build webhook data
            const quoteData = {
                name: name,
                phone: phone,
                email: email,
                zip: zip,
                source: 'zip_code_checker',
                timestamp: new Date().toISOString()
            };
            
            // Send to webhook (placeholder)
            if (WEBHOOK_URL !== 'YOUR_WEBHOOK_URL_HERE') {
                fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(quoteData),
                    mode: 'no-cors'
                });
            }
            
            // Show success message or redirect
            alert('Thank you! We\'ll reach out to you soon with your quote.');
            
            // Optionally redirect or show thank you message
            // window.location.href = 'contact.html';
        }

        // Allow Enter key to submit zip code
        document.addEventListener('DOMContentLoaded', function() {
            const zipInput = document.getElementById('zipCodeInput');
            if (zipInput) {
                zipInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        checkZipCode();
                    }
                });
                
                // Only allow numbers
                zipInput.addEventListener('input', function() {
                    this.value = this.value.replace(/\D/g, '');
                });
            }
        });

        window.__attachPlaces = function(){
            if(!window.google || !google.maps || !google.maps.places) return;
            
            const addressInput = document.getElementById('street');
            if (!addressInput) return;
            
            const autocomplete = new google.maps.places.Autocomplete(addressInput, {
                types: ['address'],
                componentRestrictions: { country: ['us'] },
                fields: ['address_components','formatted_address','geometry']
            });
            
            autocomplete.addListener('place_changed', ()=>{
                const place = autocomplete.getPlace();
                if(!place || !place.address_components) return;
                const comps = Object.fromEntries(place.address_components.flatMap(c => c.types.map(t => [t, c])));
                
                let streetAddress = '';
                if(comps.street_number) streetAddress += comps.street_number.long_name + ' ';
                if(comps.route) streetAddress += comps.route.long_name;
                if(streetAddress.trim()) addressInput.value = streetAddress.trim();
                
                const cityField = document.getElementById('cityField');
                const stateZipRow = document.getElementById('stateZipRow');
                if (streetAddress.trim()) {
                    cityField.classList.remove('hidden-initially');
                    stateZipRow.classList.remove('hidden-initially');
                }
                
                const cityInput = document.getElementById('city');
                const stateInput = document.getElementById('state');
                const zipInput = document.getElementById('zip');
                
                if(comps.locality && cityInput) cityInput.value = comps.locality.long_name;
                else if(comps.sublocality && cityInput) cityInput.value = comps.sublocality.long_name;
                if(comps.administrative_area_level_1 && stateInput) stateInput.value = comps.administrative_area_level_1.short_name;
                if(comps.postal_code && zipInput) zipInput.value = comps.postal_code.long_name;
                validateAddressForm();
            });
        };
    </script>
    <!-- PLACEHOLDER: Add your Google Maps API key here -->
    <!--
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places&callback=__attachPlaces">
    </script>
    -->
</body>
</html>
